<section class="section-hero">
  <div class="container position-relative">
    <div class="text-center hero-content">

      <h1 class="hero-title">Mis Reservas</h1>
      <p class="hero-subtitle">
        Gestiona y consulta todas tus reservas
      </p>
    </div>
  </div>
</section>

<div *ngIf="loading" class="loading-container">
  <div class="spinner-border text-primary" role="status">
    <span class="visually-hidden">Cargando...</span>
  </div>
</div>

<section class="reservations-section" *ngIf="!loading">
  <div class="container">

    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-icon total">
          <i class="bi bi-calendar-check"></i>
        </div>
        <div class="stat-content">
          <h3>{{ totalReservations }}</h3>
          <p>Total de Reservas</p>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon upcoming">
          <i class="bi bi-calendar-event"></i>
        </div>
        <div class="stat-content">
          <h3>{{ upcomingReservations }}</h3>
          <p>Pr√≥ximas Reservas</p>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon confirmed">
          <i class="bi bi-check-circle"></i>
        </div>
        <div class="stat-content">
          <h3>{{ confirmedReservations }}</h3>
          <p>Confirmadas</p>
        </div>
      </div>
    </div>
    <div class="reservations-list" *ngIf="reservations.length > 0">
      <div *ngFor="let reservation of reservations" class="reservation-card"
        [class.upcoming]="isUpcoming(reservation.reservationDate)">

        <div class="reservation-header">
          <div class="reservation-date">
            <i class="bi bi-calendar3"></i>
            <div>
              <h3>{{ formatDate(reservation.reservationDate) }}</h3>
              <p>{{ formatTime(reservation.reservationDate) }}</p>
            </div>
          </div>

          <span class="status-badge" [ngClass]="getStatusClass(reservation.status)">
            <i [class]="getStatusIcon(reservation.status)"></i>
            {{ getStatusLabel(reservation.status) }}
          </span>
        </div>

        <div class="reservation-body">
          <div class="reservation-details">
            <div class="detail-item">
              <i class="bi bi-person"></i>
              <span>{{ reservation.customerName }}</span>
            </div>

            <div class="detail-item">
              <i class="bi bi-envelope"></i>
              <span>{{ reservation.customerEmail }}</span>
            </div>

            <div class="detail-item">
              <i class="bi bi-telephone"></i>
              <span>{{ reservation.customerPhone }}</span>
            </div>

            <div class="detail-item">
              <i class="bi bi-people"></i>
              <span>{{ reservation.numPeople }} {{ reservation.numPeople === 1 ? 'persona' : 'personas' }}</span>
            </div>
          </div>

          <div class="reservation-message" *ngIf="reservation.specialNotes">
            <i class="bi bi-chat-left-text"></i>
            <p>{{ reservation.specialNotes }}</p>
          </div>
        </div>

        <div class="reservation-footer">
          <div class="reservation-meta">
            <i class="bi bi-clock-history"></i>
            <span>Creada: {{ formatDate(reservation.createdAt) }}</span>
          </div>

          <button class="btn-download-pdf" (click)="downloadPdf(reservation)"
            [disabled]="downloadingPdf[reservation.idReservation!]">
            <span *ngIf="!downloadingPdf[reservation.idReservation!]">
              <i class="bi bi-file-earmark-pdf me-2"></i>
              Descargar PDF
            </span>
            <span *ngIf="downloadingPdf[reservation.idReservation!]">
              <span class="spinner-border spinner-border-sm me-2"></span>
              Descargando...
            </span>
          </button>
        </div>
      </div>
    </div>
  </div>
</section>